<!DOCTYPE html>
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <link rel="icon" type="image/png" href="/images/favicon.png" />
<link rel="shortcut icon" type="image/png" href="/images/favicon.png" />

    
    
    <title>Hacking together a live Rainfall Monitor in 2 hours to chart a historic California rainstorm - Jacob Bokor</title>
    
    
    <meta name="author" content="Jacob Bokor" /> 
     
    
    <meta name="description" content="Engineer &amp; Student fascinated with embedded systems, low-level software, and everything to do with the hardware-software interface." /> 
    
    
    <meta name="keywords" content="Blog" />
    
    <meta property="og:title" content="Hacking together a live Rainfall Monitor in 2 hours to chart a historic California rainstorm" />
<meta property="og:description" content="I&#39;m in the process of building a weather station (which tbh is kind of a boring project, so unless I design some interesting hardware or something I probably won&#39;t post about it), but the majority of the hardware is still in the mail.
In the middle of this project, SoCal was forecasted to be hit with a historic rainstorm, and I wanted to collect live hyperlocal weather data throughout the rainstorm so I could watch cool graphs of the rainfall rate while comfortably inside." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/two-hr-rain-monitor/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-06T10:38:31-08:00" />
<meta property="article:modified_time" content="2024-02-06T10:38:31-08:00" />


    <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Hacking together a live Rainfall Monitor in 2 hours to chart a historic California rainstorm"/>
<meta name="twitter:description" content="I&#39;m in the process of building a weather station (which tbh is kind of a boring project, so unless I design some interesting hardware or something I probably won&#39;t post about it), but the majority of the hardware is still in the mail.
In the middle of this project, SoCal was forecasted to be hit with a historic rainstorm, and I wanted to collect live hyperlocal weather data throughout the rainstorm so I could watch cool graphs of the rainfall rate while comfortably inside."/>


    
    
    
    

    
    
    <link rel="stylesheet" href="http://localhost:1313/scss/main.min.f823acd0b40c9627cee16e4f8bd3272fbf36df3abe4a34e2161c9989e694477e.css" integrity="sha256-&#43;COs0LQMlifO4W5Pi9MnL7823zq&#43;SjTiFhyZieaUR34=" crossorigin="anonymous" media="screen">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="stylesheet" href="http://localhost:1313/css/block.css">
</head>

  
</head>
<body>
  <span class="mobile btn-mobile-menu">

    <i class="fa fa-list btn-mobile-menu__icon"></i>
    <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>

  </span>

  <header class="  panel-cover panel-cover--collapsed " style="background-image: url('/images/background-cover.jpg')">

    <div class="panel-main">
  
      <div class="panel-main__inner panel-inverted">
      <div class="panel-main__content">
  
          <a href="/" title="Homepage of Jacob Bokor " class="blog-button"><img src="/images/avatar.jpg" width="80" alt="Jacob Bokor logo" class="panel-cover__logo logo" /></a>
          <h1 class="panel-cover__title panel-title"><a href="/#blog" title="Homepage of Jacob Bokor" class="blog-button">Jacob Bokor</a></h1>
          
          <hr class="panel-cover__divider" />
          <p class="panel-cover__description">Engineer &amp; Student fascinated with embedded systems, low-level software, and everything to do with the hardware-software interface.</p>
          <hr class="panel-cover__divider panel-cover__divider--secondary" />
          
          
          
          <div class="navigation-wrapper">
            <div>
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="/#blog" title="Blog" class="blog-button">Blog</a></li>
                  
                    <li class="navigation__item"><a href="https://github.com/0xjmux" target="_blank" title="Projects">Projects</a></li>
                  
                    <li class="navigation__item"><a href="/tags/" target="_blank" title="Tags">Tags</a></li>
                  
                </ul>
              </nav>
            </div>
            
            <div><nav class="cover-navigation navigation--social">
    <ul class="navigation">
  
    
  
    
    
    <li class="navigation__item">
      <a href="https://github.com/0xjmux" title="@0xjmux" target="_blank">
        <i class='social fa fa-github'></i>
        <span class="label">Github</span>
      </a>
    </li>
    
    
    

    
    
    <li class="navigation__item">
      <a href="https://www.linkedin.com/in/jacobbokor" title="@jacobbokor" target="_blank">
        <i class='social fa fa-linkedin'></i>
        <span class="label">Linkedin</span>
      </a>
    </li>
    
  
    
  
    
    <li class="navigation__item">
      <a href="/index.xml" rel="author" title="RSS" target="_blank">
        <i class='social fa fa-rss'></i>
        <span class="label">RSS</span>
      </a>
    </li>
  
    
    
    <li class="navigation__item">
      <a href="mailto:jacob%20at%20jacobbokor%20dot%20com" title="Contact me">
        <i class='social fa fa-envelope'></i>
        <span class="label">Email</span>
      </a>
    </li>
    
  
    </ul>
  </nav>
  </div>
          </div>
        </div>
      </div>
      
      
      <div class="panel-cover--overlay cover-slate"></div>
      
    </div>
  </header>
  


  <div class="content-wrapper">
    <div class="content-wrapper__inner">

        
<article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="post-header">
        <div class="post-meta">
            <time datetime=" 2024-02-06 10:38:31 -0800 " itemprop="datePublished" class="post-meta__date date">2024-02-06</time>
             <span class="post-meta__tags tags">   • <a href="http://localhost:1313/tags/blog">Blog</a>  </span> 
        </div>
        <h1 class="post-title">Hacking together a live Rainfall Monitor in 2 hours to chart a historic California rainstorm</h1>
    </header>
    <section class="post">
        <p>I'm in the process of building a weather station (which tbh is kind of a boring project, so unless I design some interesting hardware or something I probably won't post about it), but the majority of the hardware is still in the mail.</p>
<p>In the middle of this project, SoCal was forecasted to be hit with a historic rainstorm, and I wanted to collect live hyperlocal weather data throughout the rainstorm so I could watch cool graphs of the rainfall rate while comfortably inside. However, my actual weather station isn't anywhere near done, so an evening of hacking something together began.</p>
<p><strong>[FINAL SETUP IMAGE]</strong></p>
<p>I had a couple requirements for this project:</p>
<ol>
<li>I wanted it to use the tipping bucket rain gauge from the <a href="https://www.sparkfun.com/products/15901">Sparkfun weather meter kit</a> that I already had on hand</li>
<li>It had to integrate with my existing Home Assistant setup, since I didn't have time to set up another service to handle the data</li>
<li>The battery had to last all weekend, and it had to be able to live outside in wet conditions for that time</li>
<li>I had 2 hours to build it, and it had to be done with parts I already had on-hand.</li>
</ol>
<p>The biggest hardware challenge I faced was the connector for the rain gauge. I didn't have an RJ11 connector on hand, and didn't want to cut the cable and replace it with something else because I'd need the RJ11 later on for my actual weather station. After some frantic rummaging trying to find an jack that would work, I remembered I had an old desktop lying around that might have a modem card in it. Sure enough, it did and I was able to desolder the jack and transfer it to perfboard.</p>
<p>Some breadboarding and a quick transfer to protoboard later, I had the hardware working.</p>
<p><strong>[PERFBOARD CIRCUIT IMAGE]</strong></p>
<p>The whole thing is stupid simple, containing just the rain gauge, a BME280 Temperature/Pressure sensor, and a voltage divider so I can monitor the battery output voltage comfortably from inside.</p>
<p><img alt="schematic image" src="/posts/two-hr-rain-monitor/files/breadboard-schematic.png"></p>
<p>I hacked together a quick <a href="https://esphome.io/">ESPHome</a> config, and stuck the entire thing in a tupperware container. After a quick test, I put it outside (since the rainstorm was already starting) and finished the firmware using the ESP's OTA update functionality.</p>
<p>It's very much a temporary solution, since while ESPHome makes setting up simple smart home devices a breeze, the connection period is a bit long and it's not very power efficient, even using deep sleep. I really wish there was an easy way to integrate with the ESPHome API from normal C/C++ programs. At least as far as I can tell from a cursory look, such functionality isn't easily available without modifying the ESPHome source.</p>
<p>Anyways, here are some cool graphs from the rainstorm this weekend.</p>
<p><strong>[LAST 5 MINS FROM FEB 4 - 6]</strong></p>
<p>Graph of rainfall rate from Feb 4-6, in 5 minute increments. Because of <a href="https://en.wikipedia.org/wiki/Rain_gauge#Tipping_bucket_rain_gauge">how the rain gauge works</a> the minute to minute data can be a bit choppy, but a simple sum to 5 minute increments smooths things out while still allowing for short spikes in rainfall intensity to show.</p>
<p><strong>[TOTAL DAILY RAIN FROM FEB 4-6]</strong></p>
<h2 id="rainfall-stats">Rainfall Stats</h2>
<table>
<thead>
<tr>
<th>Date</th>
<th>Total Rain (in)</th>
<th>Highest Rate of rainfall (in/h)</th>
</tr>
</thead>
<tbody>
<tr>
<td>February 3, 2024</td>
<td>0.011</td>
<td>1.32</td>
</tr>
<tr>
<td>February 4, 2024</td>
<td>1.45</td>
<td>2.64</td>
</tr>
<tr>
<td>February 5, 2024</td>
<td>1.77</td>
<td>5.28</td>
</tr>
<tr>
<td>February 6, 2024</td>
<td>1.45</td>
<td>6.6</td>
</tr>
</tbody>
</table>

    </section>
</article>
<section class="read-more">
    
    <div class="read-more-item">
        <span class="read-more-item-dim">Recent</span>
        <h2 class="post-list__post-title post-title"><a href="/posts/esp-jtag-adapter/" title="link to JTAG for the ESP made as Easy as Possible">JTAG for the ESP made as Easy as Possible</a></h2>
        <p class="excerpt">Adapter connected to PCB with SOICbite
Link to Github Project: 0xjmux/ESP-PROG-Adapter
One of the things I've noticed in maker communities working with MCUs like the ESP32 is how infrequently hobbyists include JTAG in their projects.
This is …&hellip;</p>
        <div class="post-list__meta">
            <time datetime=" 2024-02-06 10:38:31 -0800" class="post-list__meta--date date">2024-03-01</time>
             <span class="post-list__meta--tags tags">   • <a href="http://localhost:1313/tags/blog">Blog</a>   • <a href="http://localhost:1313/tags/jtag">JTAG</a>   • <a href="http://localhost:1313/tags/pcb">PCB</a>   • <a href="http://localhost:1313/tags/hardware">Hardware</a>  </span> 
            <a class="btn-border-small" href="/posts/esp-jtag-adapter/">Continue</a>
        </div>
    </div>
    


    
    <div class="read-more-item">
        <span class="read-more-item-dim">Earlier</span>
        <h2 class="post-list__post-title post-title"><a href="/posts/hello-world/" title="link to Hello, World!">Hello, World!</a></h2>
        <p class="excerpt">Welcome to my new website! My old one hadn't been updated in *checks notes* nearly 8 years, so it was definitely time for a refresh.
I've included some stuff I've written in the previous year, along with links to my Github - I usually try to do a …&hellip;</p>
        <div class="post-list__meta">
            <time datetime=" 2024-02-06 10:38:31 -0800" class="post-list__meta--date date">2024-01-10</time>
             
            <span class="post-list__meta--tags tags"> 
                  • <a href="http://localhost:1313/tags/blog">Blog</a>  
            </span>
            
            <a class="btn-border-small" href="/posts/hello-world/">Continue</a>
        </div>
    </div>
    
 </section>
  
<section class="post-comments">
    

    
    
  </section>
  

        <section class="footer">
    <footer>
        <span class="footer__copyright">This site is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> license.</span>
        <span class="footer__copyright">Generated by <a href="https://gohugo.io/">Hugo</a> at 2024-03-01, themed with <a href="https://github.com/xslingcn/vno-hugo"> Vno - Hugo</a>.</span>
    </footer>
</section>

    </div>
  </div>

  <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script><script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'your_ga_id', 'your_host');
    ga('send', 'pageview');
</script>

  
</body>

